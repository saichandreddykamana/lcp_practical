<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename = 'css/home.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Dashboard</title>
</head>
<body>
    <div class="container-1">
        <div class="navbar">
            <div class="logo"></div>
            <div class="nav-menu">
                <ul class="nav-list">
                    <li><a href="{{url_for('index')}}"><i class="fas fa-home"></i>&nbsp;Home</a></li>
                    <li><a href="{{url_for('search')}}"><i class="fas fa-search"></i>&nbsp;Search</a></li>
                </ul>
            </div>
        </div>
        <div class="main-container">
            <div class="dashboard-container">
                <div class="dashboard-dropdown-heading">
                    <h2> Dashboard <span class="dashboard-dropdown-icon minus"></span></h2>
                </div>
                <div class="dashboard">
                    <div class="dashboard-col">
                        <div class="col-icon">
                            <h1>{{pupil_count}}</h1>
                        </div>
                        <div class="col-content">
                            <h2>Pupils</h2>
                        </div>
                    </div>
                    <div class="dashboard-col">
                        <div class="col-icon">
                            <h1>{{school_count}}</h1>
                        </div>
                        <div class="col-content">
                            <h2>Schools</h2>
                        </div>
                    </div>
                    <div class="dashboard-col">
                        <div class="col-icon">
                            <h1>{{statement_count}}</h1>
                        </div>
                        <div class="col-content">
                            <h2>Statements</h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="table-container">
                <div class="table-dropdown-heading">
                    <h2> Pupil Information <span class="table-dropdown-icon minus"></span></h2>
                </div>
                <div class="table">
                    {% if filters %}
                    <p class="filter">
                        <span>
                            <b>{{filters['column']}}</b>
                            {% if filters['filter'] == 'match' %}
                                &nbsp;<i class="fas fa-equals"></i>&nbsp;
                            {% endif %}
                            {% if filters['filter'] != 'match' %}
                                &nbsp;<i class="fas fa-not-equal"></i>&nbsp;
                            {% endif %}
                            <b>{{filters['value']}}</b>
                        </span>
                           <a href="{{url_for('index')}}"><i class="fa-solid fa-square-xmark" style="color:red;padding-left:30px"></i></a>
                        </p>
                {% endif %}
                <table>
                    <tr>
                        {% for column in columns %}
                            {% if column != 'Id' %}
                                <th>{{column}}</th>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    {% for row in result %}
                        <tr>
                           {% for (key, value) in row.items() %}
                                {% if key != 'Id' %}
                                      <td>
                                            <div class="dropdown">
                                                <div class="data-menu"> {{value}} </div>
                                                <div class="dropdown-content">
                                                    {% if key == 'First name' or key == 'Surname' %}
                                                        <a href="{{url_for('details', id=row['Id'])}}" target="_blank"><i class="fas fa-external-link"></i>&nbsp; View Details</a>
                                                    {% endif %}
                                                    <a href="{{url_for('filter', column=key, value=value, filter='match')}}"><i class="fas fa-equals" style="color:green"></i> &nbsp; Show Matching</a>
                                                    <a href="{{url_for('filter', column=key, value=value, filter='not')}}"><i class='fas fa-not-equal' style="color:red"></i> &nbsp; Filter Out</a>
                                                </div>
                                            </div>
                                      </td>
                                {% endif %}
                           {% endfor %}
                        </tr>
                    {% endfor %}
                  </table>
                  <div class="pagination">
                        <div class="pagination-links">
                            <a href="#">&laquo;</a>
                            {% for page in range(0, total_pages) %}
                                {% if filters %}
                                    <a href="{{url_for('filter', column=filters['column'], value=filters['value'], filter=filters['filter'], page=page+1)}}">{{page+1}}</a>
                                {% else %}
                                    <a href="{{url_for('index', page=page+1)}}">{{page+1}}</a>
                                {% endif %}
                            {% endfor %}
                            <a href="#">&raquo;</a>
                        </div>
                  </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="{{url_for('static', filename = 'js/home.js')}}"></script>
</body>
</html>